<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–µ—Ä –ø–∏—Ç–∞–Ω–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            padding-bottom: 70px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            padding: 15px 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        h1 {
            font-size: 24px;
            color: #1a1a1a;
            margin-bottom: 10px;
        }
        
        .section {
            display: none;
            padding: 20px 0;
        }
        
        .section.active {
            display: block;
        }
        
        .nav-bar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #fff;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 20%;
            height: 100%;
            text-decoration: none;
            color: #59626a;
            font-size: 12px;
            transition: color 0.3s;
        }
        
        .nav-item.active {
            color: #3d4d60;
            font-weight: 500;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .card {
            background-color: #fff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .meal {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .meal:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .meal-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .meal-name {
            font-weight: 500;
        }
        
        .meal-time {
            color: #888;
            font-size: 14px;
        }
        
        .meal-calories {
            color: #ff6b6b;
            font-weight: 500;
        }
        
        .meal-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
            color: #666;
        }
        
        .progress-container {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: #4caf50;
            border-radius: 4px;
        }
        
        .stats-card {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .stat-item {
            width: 48%;
            margin-bottom: 15px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #666;
        }
        
        .chart-container {
            height: 200px;
            margin: 20px 0;
        }
        
        .recipe-card {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .recipe-image {
            height: 150px;
            background-color: #ddd;
            background-image: linear-gradient(45deg, #f3f3f3, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 18px;
        }
        
        .recipe-content {
            padding: 15px;
            background-color: #fff;
        }
        
        .recipe-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .recipe-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: #666;
        }
        
        .recipe-description {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
        }
        
        .categories {
            display: flex;
            overflow-x: auto;
            padding: 10px 0;
            margin-bottom: 15px;
            -webkit-overflow-scrolling: touch;
        }
        
        .category {
            padding: 8px 15px;
            background-color: #f0f0f0;
            border-radius: 20px;
            margin-right: 10px;
            font-size: 14px;
            white-space: nowrap;
            cursor: pointer;
        }
        
        .category.active {
            background-color: #3d4d60;
            color: #fff;
        }
        
        .loading {
            text-align: center;
            padding: 40px 0;
            color: #666;
        }
        
        .error-message {
            color: #e74c3c;
            text-align: center;
            padding: 20px;
            background-color: #fdecea;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 0;
            color: #999;
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .stat-item {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1 id="page-title">–î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è</h1>
    </header>
    
    <div class="container">
        <!-- –î–Ω–µ–≤–Ω–∏–∫ -->
        <section id="diary" class="section active">
            <div id="diary-content">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–∞...</div>
            </div>
        </section>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <section id="stats" class="section">
            <div id="stats-content">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</div>
            </div>
        </section>
        
        <!-- –†–µ—Ü–µ–ø—Ç—ã -->
        <section id="recipes" class="section">
            <div id="recipes-content">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤...</div>
            </div>
        </section>
        
        <!-- –í–µ—Å -->
        <section id="weight" class="section">
            <div class="empty-state">
                <div class="empty-state-icon">‚öñÔ∏è</div>
                <p>–†–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p>
            </div>
        </section>
        
        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <section id="profile" class="section">
            <div class="empty-state">
                <div class="empty-state-icon">üë§</div>
                <p>–†–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p>
            </div>
        </section>
    </div>
    
    <nav class="nav-bar">
        <a href="#diary" class="nav-item active" data-section="diary">
            <div class="nav-icon">üìò</div>
            <div>–î–Ω–µ–≤–Ω–∏–∫</div>
        </a>
        <a href="#stats" class="nav-item" data-section="stats">
            <div class="nav-icon">üìä</div>
            <div>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        </a>
        <a href="#recipes" class="nav-item" data-section="recipes">
            <div class="nav-icon">ü•ó</div>
            <div>–†–µ—Ü–µ–ø—Ç—ã</div>
        </a>
        <a href="#weight" class="nav-item" data-section="weight">
            <div class="nav-icon">‚öñÔ∏è</div>
            <div>–í–µ—Å</div>
        </a>
        <a href="#profile" class="nav-item" data-section="profile">
            <div class="nav-icon">üë§</div>
            <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
        </a>
    </nav>

    <script>
        // –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –±–æ—Ç–∞
        class TelegramBotApiClient {
            constructor(apiBaseUrl) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API-–∫–ª—é—á –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                this.apiKey = "telegram_webapp_secure_key_2025";
                this.apiBaseUrl = apiBaseUrl || 'https://telegram-bot-api-h136.onrender.com/api';
            }
            
            async makeRequest(endpoint, method = 'GET', data = null) {
                try {
                    const options = {
                        method: method,
                        headers: {
                            'Content-Type': 'application/json',
                            'x-api-key': this.apiKey
                        }
                    };
                    
                    if (data && (method === 'POST' || method === 'PUT')) {
                        options.body = JSON.stringify(data);
                    }
                    
                    const response = await fetch(`${this.apiBaseUrl}${endpoint}`, options);
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`API error: ${response.status} ${errorText}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error('API request failed:', error);
                    throw error;
                }
            }
            
            async getDiary(userId) {
                return this.makeRequest(`/diary/${userId}`);
            }
            
            async getStats(userId) {
                return this.makeRequest(`/stats/${userId}`);
            }
            
            async getRecipes(userId) {
                return this.makeRequest(`/recipes/${userId}`);
            }
            
            async addMeal(userId, mealData) {
                return this.makeRequest('/meal', 'POST', {
                    user_id: userId,
                    ...mealData
                });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram WebApp
        function getTelegramData() {
            if (window.Telegram && window.Telegram.WebApp) {
                return window.Telegram.WebApp.initDataUnsafe;
            }
            return null;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function getUserId() {
            const telegramData = getTelegramData();
            if (telegramData && telegramData.user) {
                return telegramData.user.id.toString();
            }
            // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å ID –∏–∑ Telegram, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π ID
            return "123456789";
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏
        function showSection(sectionId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navItem = document.querySelector(`.nav-item[data-section="${sectionId}"]`);
            if (navItem) {
                navItem.classList.add('active');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            const titles = {
                'diary': '–î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è',
                'stats': '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞',
                'recipes': '–†–µ—Ü–µ–ø—Ç—ã',
                'weight': '–í–µ—Å',
                'profile': '–ü—Ä–æ—Ñ–∏–ª—å'
            };
            
            document.getElementById('page-title').textContent = titles[sectionId] || '–¢—Ä–µ–∫–µ—Ä –ø–∏—Ç–∞–Ω–∏—è';
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞, –µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
            loadSectionData(sectionId);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∞
        async function loadSectionData(sectionId) {
            const userId = getUserId();
            
            switch (sectionId) {
                case 'diary':
                    await loadDiaryData(userId);
                    break;
                case 'stats':
                    await loadStatsData(userId);
                    break;
                case 'recipes':
                    await loadRecipesData(userId);
                    break;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–∞
        async function loadDiaryData(userId) {
            const diaryContent = document.getElementById('diary-content');
            
            try {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                const apiClient = new TelegramBotApiClient();
                const response = await apiClient.getDiary(userId);
                const diaryData = response.data;
                
                // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                if (!diaryData.days || diaryData.days.length === 0) {
                    diaryContent.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üìù</div>
                            <p>–í–∞—à –¥–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è –ø—É—Å—Ç</p>
                        </div>
                    `;
                    return;
                }
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –¥–Ω–µ–≤–Ω–∏–∫–∞
                let html = '';
                
                diaryData.days.forEach(day => {
                    const targetCalories = diaryData.user_targets.calories;
                    const percentCalories = Math.min(100, Math.round((day.total_calories / targetCalories) * 100));
                    
                    html += `
                        <div class="card">
                            <div class="card-title">
                                <span>${day.date}</span>
                                <span>${day.total_calories} / ${targetCalories} –∫–∫–∞–ª</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar" style="width: ${percentCalories}%"></div>
                            </div>
                    `;
                    
                    day.meals.forEach(meal => {
                        html += `
                            <div class="meal">
                                <div class="meal-header">
                                    <span class="meal-name">${meal.name}</span>
                                    <span class="meal-time">${meal.time}</span>
                                </div>
                                <div class="meal-calories">${meal.calories} –∫–∫–∞–ª</div>
                        `;
                        
                        if (meal.items && meal.items.length > 0) {
                            meal.items.forEach(item => {
                                html += `
                                    <div class="meal-item">
                                        <span>${item.name}</span>
                                        <span>${item.calories} –∫–∫–∞–ª</span>
                                    </div>
                                `;
                            });
                        }
                        
                        html += `</div>`;
                    });
                    
                    html += `</div>`;
                });
                
                diaryContent.innerHTML = html;
                
            } catch (error) {
                console.error('Failed to load diary data:', error);
                diaryContent.innerHTML = `
                    <div class="error-message">
                        –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.
                    </div>
                `;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadStatsData(userId) {
            const statsContent = document.getElementById('stats-content');
            
            try {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                const apiClient = new TelegramBotApiClient();
                const response = await apiClient.getStats(userId);
                const statsData = response.data;
                
                // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                if (!statsData.general || statsData.general.days_tracked === 0) {
                    statsContent.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üìä</div>
                            <p>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</p>
                        </div>
                    `;
                    return;
                }
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                const general = statsData.general;
                const distribution = statsData.nutrition_distribution;
                const targets = statsData.user_targets;
                
                let html = `
                    <div class="card stats-card">
                        <div class="stat-item">
                            <div class="stat-value">${general.avg_calories}</div>
                            <div class="stat-label">–°—Ä–µ–¥–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–∏</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${general.days_tracked}</div>
                            <div class="stat-label">–î–Ω–µ–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${general.adherence_percent}%</div>
                            <div class="stat-label">–°–æ–±–ª—é–¥–µ–Ω–∏–µ –Ω–æ—Ä–º—ã</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${general.weight_change > 0 ? '+' : ''}${general.weight_change} –∫–≥</div>
                            <div class="stat-label">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–µ—Å–∞</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ë–ñ–£</div>
                        <div style="display: flex; height: 30px; margin: 15px 0;">
                            <div style="width: ${distribution.protein}%; background-color: #4caf50; height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">–ë ${distribution.protein}%</div>
                            <div style="width: ${distribution.fat}%; background-color: #ff9800; height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">–ñ ${distribution.fat}%</div>
                            <div style="width: ${distribution.carb}%; background-color: #2196f3; height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">–£ ${distribution.carb}%</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px; color: #666;">
                            <div>–ë–µ–ª–∫–∏: ${targets.protein} –≥</div>
                            <div>–ñ–∏—Ä—ã: ${targets.fat} –≥</div>
                            <div>–£–≥–ª–µ–≤–æ–¥—ã: ${targets.carb} –≥</div>
                        </div>
                    </div>
                `;
                
                if (statsData.top_products && statsData.top_products.length > 0) {
                    html += `
                        <div class="card">
                            <div class="card-title">–¢–æ–ø –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
                            <ul style="list-style: none; padding: 0;">
                    `;
                    
                    statsData.top_products.forEach(product => {
                        html += `
                            <li style="display: flex; justify-content: space-between; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #eee;">
                                <span>${product.name}</span>
                                <span>${product.count} —Ä–∞–∑</span>
                            </li>
                        `;
                    });
                    
                    html += `
                            </ul>
                        </div>
                    `;
                }
                
                statsContent.innerHTML = html;
                
            } catch (error) {
                console.error('Failed to load stats data:', error);
                statsContent.innerHTML = `
                    <div class="error-message">
                        –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.
                    </div>
                `;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
        async function loadRecipesData(userId) {
            const recipesContent = document.getElementById('recipes-content');
            
            try {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                const apiClient = new TelegramBotApiClient();
                const response = await apiClient.getRecipes(userId);
                const recipesData = response.data;
                
                // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                if (!recipesData.recipes || recipesData.recipes.length === 0) {
                    recipesContent.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üçΩÔ∏è</div>
                            <p>–†–µ—Ü–µ–ø—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                        </div>
                    `;
                    return;
                }
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                let categoriesHtml = `<div class="categories">`;
                recipesData.categories.forEach((category, index) => {
                    categoriesHtml += `
                        <div class="category ${index === 0 ? 'active' : ''}" data-category="${category}">${category}</div>
                    `;
                });
                categoriesHtml += `</div>`;
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è —Ä–µ—Ü–µ–ø—Ç–æ–≤
                let recipesHtml = '';
                recipesData.recipes.forEach(recipe => {
                    recipesHtml += `
                        <div class="recipe-card" data-category="${recipe.category}">
                            <div class="recipe-image">üçΩÔ∏è ${recipe.title}</div>
                            <div class="recipe-content">
                                <div class="recipe-title">${recipe.title}</div>
                                <div class="recipe-meta">
                                    <span>${recipe.prep_time}</span>
                                    <span>${recipe.calories} –∫–∫–∞–ª</span>
                                </div>
                                <div class="recipe-description">${recipe.description}</div>
                            </div>
                        </div>
                    `;
                });
                
                recipesContent.innerHTML = categoriesHtml + recipesHtml;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                document.querySelectorAll('.category').forEach(categoryEl => {
                    categoryEl.addEventListener('click', () => {
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                        document.querySelectorAll('.category').forEach(el => {
                            el.classList.remove('active');
                        });
                        categoryEl.classList.add('active');
                        
                        const selectedCategory = categoryEl.dataset.category;
                        
                        // –§–∏–ª—å—Ç—Ä—É–µ–º —Ä–µ—Ü–µ–ø—Ç—ã
                        document.querySelectorAll('.recipe-card').forEach(recipeEl => {
                            if (selectedCategory === '–í—Å–µ' || recipeEl.dataset.category === selectedCategory) {
                                recipeEl.style.display = 'flex';
                            } else {
                                recipeEl.style.display = 'none';
                            }
                        });
                    });
                });
                
            } catch (error) {
                console.error('Failed to load recipes data:', error);
                recipesContent.innerHTML = `
                    <div class="error-message">
                        –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.
                    </div>
                `;
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = item.dataset.section;
                    showSection(sectionId);
                });
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª
            showSection('diary');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.expand();
            }
        });
    </script>
</body>
</html>
